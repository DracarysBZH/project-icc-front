<div class="container-fluid">

  <div class="row text-center mt-3">
    <div class="col">
      <h1>{{ title }}</h1>
    </div>
  </div>

  <div class="row">
    <div class="col-8 offset-2 mt-2">
      <ngb-tabset type="pills" justify="center" (tabChange)="getApiLink($event)">

        <ngb-tab title="/hiking" id="/hiking/921410">
          <ng-template ngbTabContent>
            <div class="jumbotron jumbotron-fluid pt-2 pb-1 mt-4">
              <div class="container-fluid description">
                Fonctionnement de la route :
                <hr>
                /hiking/id avec <span class="font-weight-bold">id</span> correspondant à l'id d'un chemin de randonnées.
                <br><br>
                Exemple: <pre>/hiking/921410</pre>
              </div>
            </div>
          </ng-template>
        </ngb-tab>

        <ngb-tab title="/extract" id="/extract">
          <ng-template ngbTabContent>
            <div class="jumbotron jumbotron-fluid pt-2 pb-1 mt-4">
              <div class="container-fluid description">
                Exemple de body :
                <hr>
                <pre>
{{ '{' }}
  "description": "chantage matinal : pas de sortie famille sans myrtille ont prétexte les grands.sur les conseils de panic, je reste su' l'idée d'aller au lac de Maucapera, en mode recup.au total, truites, baignade, pique nique et belle cueillette de myrtilles et framboises.y'en a eu pour tout le monde!!!!!depuis le pont de Budearous, montée rive droite vers la cabane de Peyrahite, puis de Maucapera  et enfin le lac.descente rive gauche du déversoir en restant toujours gauche jusqu'au parking.sec",
  "name": "Montée au  lac de Maucapéra"
{{ '}' }}</pre>
              </div>
            </div>
          </ng-template>
        </ngb-tab>

        <ngb-tab title="/geolocalize" id="/geolocalize">
          <ng-template ngbTabContent>
            <div class="jumbotron jumbotron-fluid pt-2 pb-2 mt-4">
              <div class="container-fluid description">
                <div class="row">
                  <div class="col-6">
                    Exemple de body :
                    <hr>
                    <pre>{{ '{' }}
  "entities": [
    "http://fr.dbpedia.org/resource/Lac",
    "http://fr.dbpedia.org/resource/Paris",
    "http://fr.dbpedia.org/resource/Pau"
  ]
{{ '}' }}</pre>
                  </div>
                  <div class="col-6">
                    Exemple d'erreur de retour :
                    <hr>
                    Si les entités sont vide :
                    <pre>{{ '{' }}
  "status": "no entities key found in json"
{{ '}' }}</pre>
                    Si aucunes coordonnées n'exite pour les entités fournis :
                    <pre>{{ '{' }}
  "status": "no coordinates found"
{{ '}' }}</pre>
                  </div>
                </div>
              </div>
            </div>
          </ng-template>
        </ngb-tab>

        <ngb-tab title="/utm" id="/utm">
          <ng-template ngbTabContent>
            <div class="jumbotron jumbotron-fluid pt-2 pb-2 mt-4">
              <div class="container-fluid description">
                Exemple de body :
                <hr>
                <pre>{{ '{' }}
  "coords": [
    {{ '{' }}
      "latitude": "48.856578",
      "longitude": "2.351828",
      "uri": "http://fr.dbpedia.org/resource/Paris"
    {{ '}' }},
    {{ '{' }}
        "latitude": "43.3017",
        "longitude": "-0.3686",
        "uri": "http://fr.dbpedia.org/resource/Pau"
    {{ '}' }}
  ]
{{ '}' }}</pre>
              </div>
            </div>
          </ng-template>
        </ngb-tab>

        <ngb-tab title="/images" id="/images">
          <ng-template ngbTabContent>
            <div class="jumbotron jumbotron-fluid pt-2 pb-2 mt-4">
              <div class="container-fluid description">
                <div class="row">
                  <div class="col-3">
                    Exemple de body :
                    <hr>
                    <pre>{{ '{' }}
  "boundingbox": {{ '{' }}
    "ne": {{ '{' }}
      "lng": 2.351828,
      "lat": 48.856578
    {{ '}' }},
    "sw": {{ '{' }}
      "lng": -0.3686,
      "lat": 43.3017
    {{ '}' }}
  {{ '}' }}
{{ '}' }}</pre>
                  </div>
                  <div class="col-5">
                    Exemple de retour :
                    <hr>
                    L'image va être téléchargé :
                    <pre>{{ '{' }}
  "name": "name",
  "status": "Images found, wait for the download"
{{ '}' }}</pre>
                    L'image est en cours de téléchargement :
                    <pre>{{ '{' }}
  "name": "name",
  "status": "Image is already downloading"
{{ '}' }}</pre>
                  </div>
                  <div class="col-4">
                    L'image est téléchargé :
                    <pre>{{ '{' }}
  "name": "name",
  "status": "Image already downloaded"
{{ '}' }}</pre>
                  Le format du json est incorrect :
                  <pre>{{ '{' }}
  "status": "Wrong json format for coords"
{{ '}' }}</pre>
                  Aucune images n'existe dans PEPS :
                  <pre>{{ '{' }}
  "status": "No images found on peps"
{{ '}' }}</pre>
                  </div>
                </div>
              </div>
            </div>
          </ng-template>
        </ngb-tab>

        <ngb-tab title="/tiles" id="/tiles">
          <ng-template ngbTabContent>
            <ngb-tabset type="pills" justify="center" (tabChange)="getApiLink($event)" class="col">
              <ngb-tab title="/tiles" id="/tiles">
                <ng-template ngbTabContent>
                  <div class="jumbotron jumbotron-fluid pt-2 pb-2 mt-4">
                    <div class="container-fluid description">
                      Exemple de body :
                      <hr>
                      <pre>{{ '{' }}
  "name": "45646132-f1e6-51b5-8be7-eb17d8171c5f",
  "status": "Image already downloaded"
{{ '}' }}</pre>
                    </div>
                  </div>
                </ng-template>
              </ngb-tab>

              <ngb-tab title="/tiles/status/" id="/tiles/status/">
                <ng-template ngbTabContent>
                  <div class="jumbotron jumbotron-fluid pt-2 pb-2 mt-4">
                    <div class="container-fluid description">
                      Fonctionnement de la route :
                      <hr>
                      /tiles/status/name avec <span class="font-weight-bold">name</span> correspondant au name d'une image.
                      <br><br>
                      Exemple : <pre>/tiles/status/45646132-f1e6-51b5-8be7-eb17d8171c5f</pre>
                    </div>
                  </div>
                </ng-template>
              </ngb-tab>
            </ngb-tabset>

          </ng-template>
        </ngb-tab>

        <ngb-tab title="/save" id="/save">
          <ng-template ngbTabContent>
            <div class="jumbotron jumbotron-fluid pt-2 pb-2 mt-4">
              <div class="container-fluid description">
                Exemple de body :
                <hr>
                <pre>{{ '{' }}
    "imgName": "45646132-f1e6-51b5-8be7-eb17d8171c5f",
    "status": "Tiles are totally computed !",
    "statusCode": "TOTALLY_COMPUTED"
{{ '}' }}</pre>
              </div>
            </div>
          </ng-template>
        </ngb-tab>

        <ngb-tab title="/metadata" id="/metadata">
          <ng-template ngbTabContent>
            <div class="jumbotron jumbotron-fluid pt-2 pb-2 mt-4">
              <div class="container-fluid">
                <div class="col-6 offset-3 align-middle description">
                  <table class="table table-bordered text-center">
                    <tbody>
                      <tr>
                        <td>:id</td>
                        <td>Exemple: 921410</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </ng-template>
        </ngb-tab>

        <ngb-tab title="/elasticsearch" id="/elasticsearch">
          <ng-template ngbTabContent>
            <div class="jumbotron jumbotron-fluid pt-2 pb-2 mt-4">
              <div class="container-fluid">
                <div class="col-6 offset-3 align-middle description">
                  <table class="table table-bordered text-center">
                    <tbody>
                      <tr>
                        <td>:id</td>
                        <td>Exemple: 921410</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </ng-template>
        </ngb-tab>

      </ngb-tabset>
    </div>
  </div>

  <div class="row">
    <div class="col-8 offset-2 mt-1 mb-3">
      <form (ngSubmit)="onSubmit()" >
        <div class="input-group mb-3">
          <div class="input-group-prepend">
            <span class="input-group-text" id="backEndUrl">{{ backEndUrl }}</span>
          </div>
          <input type="text" class="form-control" aria-describedby="backEndUrl" name="apiLink" [(ngModel)]="apiLink">
          <div class="input-group-append" id="button-addon4">
            <button class="btn btn-outline-primary" type="submit">Submit</button>
          </div>
        </div>
        <!--<div class="input-group" *ngIf="body">
          <div class="input-group-prepend">
            <span class="input-group-text">Body</span>
          </div>
          <textarea class="form-control" aria-label="With textarea" name="bodyRequest" [(ngModel)]="bodyRequest"></textarea>
        </div>-->
        <div class="form-group" *ngIf="body">
          <span class="input-group-text">Body</span>
          <ngx-monaco-editor class="my-code-editor" [options]="editorOptions" [(ngModel)]="bodyRequest" name="bodyRequest" ></ngx-monaco-editor>
        </div>
      </form>
    </div>
  </div>

  <div class="row" *ngIf="jsonResponse != null">
    <div class="col text-center">
      <button type="button" class="btn btn-outline-secondary" (click)="copyToClipBoard()">Copy to clipboard the response</button>
      <button type="button" class="btn btn-outline-secondary ml-1" (click)="isCollapsed = !isCollapsed" [attr.aria-expanded]="!isCollapsed" aria-controls="collapseExample">View raw</button>
    </div>
  </div>

  <div class="row" *ngIf="jsonResponse != null">
    <div id="collapseExample" [ngbCollapse]="isCollapsed" class="col-8 offset-2 mt-2">
      <div class="card">
        <div class="card-body">
          <pre>{{ jsonResponse | json }}</pre>
        </div>
      </div>
    </div>
  </div>

  <div class="row" *ngIf="jsonResponse != null">
    <div class="col-8 offset-2 shadow p-3 mb-5 mt-3 bg-white rounded">
      <ngx-json-viewer [json]="jsonResponse"></ngx-json-viewer>
    </div>
  </div>

</div>
